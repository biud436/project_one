<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/a99df0f94f.js" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@200;300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/a99df0f94f.js" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <link rel="stylesheet" href="../css/board-post.css">
</head>
<body>
    <!-- 컨테이너의 시작 -->
    <div class="container">
        <!-- 헤더의 시작 -->
        <header>
            <div class="header-wrapper">
                <!-- 헤더 왼쪽 : 로고 -->
                <div class="header-left">
                    <div class="" id="logo">
                        <a href="/"><img src="https://dummyimage.com/64x64/000/fff" alt=""></a>
                    </div>
                    <a href="#">WOMEN</a>
                    <a href="#">MEN</a>
                </div>
                <!-- 헤더 중앙 : 메뉴 -->
                <div class="header-center">
                    <a href="/">SHOP</a>
                    <a href="../item.html" target="_self">ITEM</a>
                    <a href="../sale.html">SALE</a>
                    <a href="#">MORE</a>
                </div>
                <!-- 헤더 오른쪽 : 로그인 / 검색 -->
                <div class="header-right">
                    <button class="header-right-login-button">로그인</button>
                    <input type="text" class="input-non-border-box" name="" id="" placeholder="검색어를 입력하세요">
                </div>
            </div>
            <!-- 숨겨진 메뉴 -->
            <div class="header-popup-container">
                <ul class="header-menu-list">
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">최근 본 샵 <em>0</em></p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">최근 본 상품 <em>0</em></p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">MY SHOP</p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">관심 상품</p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">1:1 문의</p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">소개 및 약관</p>
                        </a>
                    </li>
                    <li class="menu">
                        <a href="#" class="menu-link">
                            <div class="menu-icon"></div>
                            <p class="menu-title">마케팅 센터</p>
                        </a>
                    </li>
                </ul>
            </div>
        </header>
        <!-- 본문의 시작 -->
        <section>
            <!-- 본문이 들어가는 래퍼 -->
            <div class="contents-wrapper">    
                <div class="board-post-container">
                    <div class="board-post-header">
                        <!-- 게시판 목록 보기 버튼-->
                        <div class="board-post-sub-detail">
                            <span>문의 게시판</span>
                        </div>
                        <!-- 게시물 제목 -->
                        <div class="board-post-title">
                            <strong>반품 신청합니다...</strong>
                        </div>
                        <!-- 작성자 프로필 / 작성 날짜 / 조회수 / 댓글수 -->
                        <div class="board-post-header-detail-info">
                            <div class="profile-box">
                                <span><i class="fas fa-user-circle fa-3x"></i></span>
                            </div>
                            <div class="detail-area">
                                <div class="detail-area-author-id">
                                    <span>biud436</span>        
                                </div>
                                <div class="detail-area-date-panel">
                                    <span>날짜</span>
                                    <span>조회수</span>
                                    <span>댓글 수</span>    
                                </div>
                            </div>
                            <!-- 게시물 공유 및 삭제 버튼 -->
                            <div class="board-post-header-function">
                                <a href=""><i class="fa fa-share-alt" aria-hidden="true"></i></a>
                                <a href=""><i class="fa fa-trash-o" aria-hidden="true"></i></a>
                            </div>                            
                        </div>
                    </div>
                    <div class="board-post-body">
                        <div class="board-article">
                            <!-- 글 내용 -->
                            <div class="board-article-contents">
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                                <p>글 쓰기 내용</p><br>
                            </div>
                            <div class="board-article-footer">
                                <!-- 추천 버튼 -->
                                <div class="board-article-function-recommand">
                                    <a href="#"><i class="fa fa-thumbs-up" aria-hidden="true"></i></a>
                                </div>
                                <!-- 게시물 목록 / 공유  -->
                                <div class="board-article-function-share">
                                    <a href=""><i class="fa fa-share-alt" aria-hidden="true"></i></a>
                                </div>
                            </div>
                        </div>
                        <div class="board-post-comment">
                            <div class="comment-header">
                                <!-- 댓글 갯수 -->
                                <span><em>1</em> 개 댓글</span>
                            </div>
                            <div class="comment-area">
                                <div class="comment-author">
                                    <div class="profile-box">
                                        <span><i class="fas fa-user-circle fa-3x"></i></span>
                                    </div>
                                    <div class="detail-area">
                                        <div class="detail-area-author-id">
                                            <span>biud436</span>        
                                        </div>
                                        <div class="detail-area-date-panel">
                                            <span>1일 전</span>
                                            <span style="cursor:pointer;">답글</span>
                                            <span style="cursor:pointer;">삭제</span>
                                        </div>
                                        <div class="detail-area-contents">
                                            <span>이것도 민원인가요</span>
                                        </div>
                                    </div>       
                                </div>
                                <div class="add-comment-button-area">
                                    <textarea name="" id=""></textarea>
                                    <a href="#" id="comment-ok-button">등록</a>
                                </div>                         
                            </div>
                        </div>
                    </div>
                </div>  
            </div>
        </section>
    </div>
    <!-- 라이트 박스-->
    <div id="light-box-container">
    </div>
    <!-- 스크립트 -->
    <!-- <script src="../js/boardMain.js"></script>     -->
    <script type="module" src="../js/MorePage.js"></script>    
    <script>
        let postCount = 100;

        // 한 페이지에 표시되는 글의 수
        let maxPostOfPage = 10;

        // 전체 게시물 수 / 한 페이지에 표시되는 글의 수
        let perPage = (postCount / maxPostOfPage) + 1;

        // 전체 페이지 수
        let pageCount = Math.floor(postCount / perPage) + 1;

        // TODO: 현재 페이지를 구하려면, maxPostOfPage + 1로 나누면 된다.
        let currentPostNumber = 18;
        let currentPage = (currentPostNumber / perPage) + 1;

        // 게시판 데이터 스키마
        let boardSchema = [
            {
                postNo: 0,
                postType: 'N', // Normal.
                postTitle: "",
                name: "",
                create_at: new Date(),
                view: 0,
                recommandCount: 0
            }
        ]

        let boardData = [{
            "postNumber": "글 번호",
            "postType": "Normal",
            "postTitle": "글 제목",
            "name": "이름",
            "create_at": "날짜",
            "view": "조회",
            "recommandCount": "추천"
        }, {
            "postNumber": "18",
            "postType": "Notice",
            "postTitle": "공지사항입니다.",
            "name": "관리자",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "17",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "16",
            "postType": "Normal",
            "postTitle": "걱정입니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "15",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "14",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "13",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "12",
            "postType": "Normal",
            "postTitle": "걱정입니다.[2]",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "11",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "10",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "9",
            "postType": "Normal",
            "postTitle": "걱정입니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "8",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "7",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "6",
            "postType": "Normal",
            "postTitle": "걱정입니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "5",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "4",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "3",
            "postType": "Normal",
            "postTitle": "걱정입니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "2",
            "postType": "Normal",
            "postTitle": "반품 문의 합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }, {
            "postNumber": "1",
            "postType": "Normal",
            "postTitle": "반품 관련으로 문의합니다.",
            "name": "kjkj****",
            "create_at": "2020.11.20",
            "view": "0",
            "recommandCount": "0"
        }];

        const Editor = {
            init() {
                this.initWithEvent();
                this.initWithPages();
            },

            /**
             * 모바일에서 구동 중인지 확인합니다.
             */
            isMobileDevice() {
                // userAgent가 모바일이면 모바일 기기로 판단
                const isMobile = (/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));
                if(isMobile) return true;
                // 가로 길이가 720 이하라면 모바일 기기로 판단
                isMobile = $(window).innerWidth() <= 720;
                return isMobile;
            },

            initWithEvent() {
                const self = this;
                this._elem = $("#editor");
                this._elem.find("a").on("click", function(ev) {
                    const postNumber = $(this)
                        .parent()
                        .parent()
                        .find("td").eq(0).text();

                    // postNumber 전달
                    // pageNumber도 전달해야 할 듯 한데...
                    let url = new URLSearchParams(location.search);
                    url.set("postNumber", postNumber);

                    location.search = url.toString();                    
                });
            },

            initWithPages() {

            },

            nextPage() {

            },

            prevPage() {

            },

            toJson() {

                const data = [];

                $("#editor").find("tr").each((i, elem) => {
                    const tdItems = $(elem).children();
                    data.push({
                        postNumber: tdItems.eq(0).text(),
                        postType: tdItems.eq(1).text().trim() === "공지" ? "Notice" : "Normal",
                        postTitle : tdItems.eq(2).text(),
                        name : tdItems.eq(3).text(),
                        create_at: tdItems.eq(4).text(),
                        view: tdItems.eq(5).text(),
                        recommandCount: tdItems.eq(6).text()
                    });
                });

                return data;
            }
        };

        Editor.init();

    </script>
</body>
</html>